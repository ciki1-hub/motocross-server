services:
  # RTMP Streaming Server
  - type: web
    name: motocross-rtmp-server
    env: docker
    plan: free
    dockerfilePath: ./streaming/Dockerfile
    buildCommand: |
      cd streaming && \
      docker build -t motocross-rtmp .
    envVars:
      - key: RTMP_PORT
        value: 1935
      - key: HTTP_PORT
        value: 8080
      - fromGroup: motocross-streaming-keys
    autoDeploy: true
    healthCheckPath: /health
